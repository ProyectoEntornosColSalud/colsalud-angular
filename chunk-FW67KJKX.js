import{a as ee}from"./chunk-R4FOARTZ.js";import{a as z}from"./chunk-Q5MM74UU.js";import{b as M}from"./chunk-N7A26PNA.js";import{b as J,c as U,d as X,e as Q,f as W,g as Z}from"./chunk-LG72T2M5.js";import{c as K}from"./chunk-CPHYMOXK.js";import{A as L,B as O,F as $,J as H,b as F,d as E,g as N,j as I,l as n,o as T,p as A,t as R,u as B,v as q,w as j,y as G}from"./chunk-CQBN377C.js";import"./chunk-42WQ4I5L.js";import{a as D,b as _,d as P,e as Y}from"./chunk-AINHTS73.js";import{Aa as s,Ab as C,Bb as V,Ea as f,Hb as k,Na as h,Ya as d,cb as w,db as b,ea as p,eb as S,fa as c,fb as t,gb as e,hb as m,lb as x,nb as g,yb as y,zb as i}from"./chunk-CKGIQUTN.js";import"./chunk-2NFLSA4Y.js";function re(u,r){if(u&1&&(t(0,"mat-option",8),i(1),e()),u&2){let o=r.$implicit;d("value",o.value),s(),C(o.viewValue)}}function ae(u,r){if(u&1&&(t(0,"mat-option",8),i(1),e()),u&2){let o=r.$implicit;d("value",o.value),s(),V("",o.viewValue," ")}}var te=class u{constructor(r,o,a,l){this.router=r;this.fb=o;this.authService=a;this.snackBar=l;this.registerForm=this.fb.group({docType:["CC",n.required],docNumber:["12344321",n.required],name:["Jon",n.required],lastname:["Snow",n.required],gender:["M",n.required],dob:[new Date,n.required],email:["jonsnou@email.com",[n.required,n.email]],phone:["3213213213",n.required],password:["hola123",[n.required,n.minLength(6)]],confirmPassword:["hola123",[n.required]]})}documents=[{value:"CC",viewValue:"C\xE9dula de ciudadan\xEDa"},{value:"TI",viewValue:"Tarjeta de identidad"},{value:"CE",viewValue:"C\xE9dula de extranjer\xEDa"}];genders=[{value:"hombre",viewValue:"Hombre"},{value:"mujer",viewValue:"Mujer"},{value:"no-binario",viewValue:"No binario"},{value:"genero-fluido",viewValue:"G\xE9nero fluido"},{value:"bigenero",viewValue:"Big\xE9nero"},{value:"trigenero",viewValue:"Trig\xE9nero"},{value:"agenero",viewValue:"Ag\xE9nero"},{value:"demiboy",viewValue:"Demiboy"},{value:"demigirl",viewValue:"Demigirl"},{value:"neutrois",viewValue:"Neutrois"},{value:"maverique",viewValue:"Maverique"},{value:"androgino",viewValue:"Andr\xF3gino"},{value:"genero-queer",viewValue:"G\xE9nero queer"},{value:"dos-espiritus",viewValue:"Dos esp\xEDritus"},{value:"hijra",viewValue:"Hijra"},{value:"faafafine",viewValue:"Fa\u2019afafine"},{value:"bakla",viewValue:"Bakla"},{value:"muxhe",viewValue:"Muxhe"},{value:"intergenero",viewValue:"Interg\xE9nero"},{value:"autogenero",viewValue:"Autog\xE9nero"},{value:"aliagenero",viewValue:"Aliag\xE9nero"},{value:"xenogenero",viewValue:"Xenog\xE9nero"}];registerForm;getMaxDate(){return new Date().toISOString().split("T")[0]}getMinDate(){let r=new Date;return r.setFullYear(r.getFullYear()-120),r.toISOString().split("T")[0]}onlyAllowNumbers(r){let o=["Backspace","Tab","ArrowLeft","ArrowRight","Delete","Slash","/"];console.log(r.key);let a=/^\d$/.test(r.key);o.includes(r.key)||a||r.preventDefault()}register(){let r=this.registerForm.value.dob,o=$(r);this.authService.register({docType:this.registerForm.value.docType,docNumber:this.registerForm.value.docNumber,name:this.registerForm.value.name,lastName:this.registerForm.value.lastname,gender:this.registerForm.value.gender,birthDate:o,email:this.registerForm.value.email,phone:this.registerForm.value.phone,password:this.registerForm.value.password}).subscribe({next:a=>{let l=a.headers.get("Authorization");if(l)sessionStorage.setItem("token",l);else throw new Error("No se ha recibido el token");this.router.navigate(["home"]).then()},error:a=>{console.error("Register error",a),this.snackBar.open(a.error.message,"",{duration:5e3,panelClass:["error-snackbar","mb-5"],horizontalPosition:"right",verticalPosition:"top"})}})}goToLogin(){this.router.navigate(["/"]).then()}static \u0275fac=function(o){return new(o||u)(f(M),f(j),f(z),f(H))};static \u0275cmp=h({type:u,selectors:[["ng-component"]],features:[k([ee()])],decls:68,vars:5,consts:[["picker",""],[1,"flex","items-center","justify-center","min-h-screen"],[1,"border","border-gray-400","px-8","py-3","my-3","rounded-lg","w-full","max-w-4xl"],[1,"pb-7","text-3xl","text-center","font-mono","text-slate-150"],[1,"text-lg","text-center","mb-8"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6",3,"ngSubmit","formGroup"],["appearance","fill",1,"w-full"],["formControlName","docType"],[3,"value"],["matInput","","type","text","formControlName","docNumber"],["matInput","","type","text","formControlName","name"],["matInput","","type","text","formControlName","lastname"],["formControlName","gender"],["matInput","","formControlName","dob","placeholder","MM/DD/AAAA",3,"keydown","matDatepicker","min","max"],["matIconSuffix","",3,"for"],["matInput","","type","email","formControlName","email"],["matSuffix",""],["matInput","","type","tel","formControlName","phone"],["matInput","","type","password","formControlName","password"],["matInput","","type","password","formControlName","confirmPassword"],[1,"flex","justify-center","text-center","items-center","gap-4","mt-6"],[1,"text-sm","cursor-pointer","hover:text-blue-800",3,"click"],["mat-flat-button","",1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"]],template:function(o,a){if(o&1){let l=x();t(0,"div",1)(1,"div",2)(2,"p",3),i(3,"COLSALUD"),e(),t(4,"h2",4),i(5,"Registrarse en el sistema"),e(),t(6,"form",5),g("ngSubmit",function(){return p(l),c(a.register())}),t(7,"mat-form-field",6)(8,"mat-label"),i(9,"Tipo de documento"),e(),t(10,"mat-select",7),b(11,re,2,2,"mat-option",8,w),e()(),t(13,"mat-form-field",6)(14,"mat-label"),i(15,"N\xFAmero de documento"),e(),m(16,"input",9),e(),t(17,"mat-form-field",6)(18,"mat-label"),i(19,"Nombres"),e(),m(20,"input",10),e(),t(21,"mat-form-field",6)(22,"mat-label"),i(23,"Apellidos"),e(),m(24,"input",11),e(),t(25,"mat-form-field",6)(26,"mat-label"),i(27,"G\xE9nero"),e(),t(28,"mat-select",12),m(29,"mat-option"),b(30,ae,2,2,"mat-option",8,w),e()(),t(32,"mat-form-field")(33,"mat-label"),i(34,"Fecha de nacimiento"),e(),t(35,"input",13),g("keydown",function(ie){return p(l),c(a.onlyAllowNumbers(ie))}),e(),m(36,"mat-datepicker-toggle",14)(37,"mat-datepicker",null,0),e(),t(39,"mat-form-field",6)(40,"mat-label"),i(41,"Correo"),e(),m(42,"input",15),t(43,"mat-icon",16),i(44,"mail"),e()(),t(45,"mat-form-field",6)(46,"mat-label"),i(47,"Tel\xE9fono"),e(),m(48,"input",17),t(49,"mat-icon",16),i(50,"phone"),e()(),t(51,"mat-form-field",6)(52,"mat-label"),i(53,"Contrase\xF1a"),e(),m(54,"input",18),t(55,"mat-icon",16),i(56,"lock"),e()(),t(57,"mat-form-field",6)(58,"mat-label"),i(59,"Confirmar contrase\xF1a"),e(),m(60,"input",19),t(61,"mat-icon",16),i(62,"lock"),e()()(),t(63,"div",20)(64,"div",21),g("click",function(){return p(l),c(a.goToLogin())}),i(65,"Ya tengo cuenta"),e(),t(66,"button",22),g("click",function(){return p(l),c(a.register())}),i(67," Registrarse "),e()()()()}if(o&2){let l=y(38);s(6),d("formGroup",a.registerForm),s(5),S(a.documents),s(19),S(a.genders),s(5),d("matDatepicker",l)("min",a.getMinDate())("max",a.getMaxDate()),s(),d("for",l)}},dependencies:[O,L,N,F,E,Y,P,_,D,U,J,K,Z,X,Q,W,G,R,I,T,A,B,q],encapsulation:2})};export{te as RegisterComponent};
