import{a as _}from"./chunk-SD26ZGFB.js";import{b as V}from"./chunk-MLIP6L5G.js";import{a as K,b as J,c as Q,d as W}from"./chunk-MBBMS6ZK.js";import"./chunk-QWLWO6DT.js";import{b as z,c as L}from"./chunk-2KOU7MSG.js";import{b as $,c as X}from"./chunk-3RQUALOM.js";import{c as H}from"./chunk-I24E4AGB.js";import{b as N,d as U,g as T,j as B,l,o as j,p as q,t as G,u as O,v as P,w as Y,y as R}from"./chunk-P3OJ7RPL.js";import{d as M,g as I}from"./chunk-LTY4KBVV.js";import{a as A,b as F}from"./chunk-RSJPXRVQ.js";import{$a as w,Ca as f,Ka as S,Va as d,ab as b,ad as k,bb as h,bd as E,ca as p,cb as t,da as c,db as e,eb as n,ib as y,kb as v,vb as x,wb as a,xb as D,ya as s,yb as C}from"./chunk-VBLDOLAL.js";import"./chunk-2NFLSA4Y.js";function te(u,r){if(u&1&&(t(0,"mat-option",8),a(1),e()),u&2){let i=r.$implicit;d("value",i.value),s(),D(i.viewValue)}}function ie(u,r){if(u&1&&(t(0,"mat-option",8),a(1),e()),u&2){let i=r.$implicit;d("value",i.value),s(),C("",i.viewValue," ")}}var Z=class u{constructor(r,i,o,m){this.router=r;this.fb=i;this.authService=o;this.snackBar=m;this.form=this.fb.group({docType:["",l.required],docNumber:[{value:"",disabled:!0},l.required],name:["",l.required],lastname:["",l.required],gender:["",l.required],dob:["",l.required],email:["",[l.required,l.email]],phone:["",l.required],password:["",[]],confirmPassword:["",[]]})}documents=[{value:"CC",viewValue:"C\xE9dula de ciudadan\xEDa"},{value:"TI",viewValue:"Tarjeta de identidad"},{value:"CE",viewValue:"C\xE9dula de extranjer\xEDa"}];genders=[{value:"hombre",viewValue:"Hombre"},{value:"mujer",viewValue:"Mujer"},{value:"no-binario",viewValue:"No binario"},{value:"genero-fluido",viewValue:"G\xE9nero fluido"},{value:"bigenero",viewValue:"Big\xE9nero"},{value:"trigenero",viewValue:"Trig\xE9nero"},{value:"agenero",viewValue:"Ag\xE9nero"},{value:"demiboy",viewValue:"Demiboy"},{value:"demigirl",viewValue:"Demigirl"},{value:"neutrois",viewValue:"Neutrois"},{value:"maverique",viewValue:"Maverique"},{value:"androgino",viewValue:"Andr\xF3gino"},{value:"genero-queer",viewValue:"G\xE9nero queer"},{value:"dos-espiritus",viewValue:"Dos esp\xEDritus"},{value:"hijra",viewValue:"Hijra"},{value:"faafafine",viewValue:"Fa\u2019afafine"},{value:"bakla",viewValue:"Bakla"},{value:"muxhe",viewValue:"Muxhe"},{value:"intergenero",viewValue:"Interg\xE9nero"},{value:"autogenero",viewValue:"Autog\xE9nero"},{value:"aliagenero",viewValue:"Aliag\xE9nero"},{value:"xenogenero",viewValue:"Xenog\xE9nero"}];form;ngOnInit(){this.authService.getUserInfo().subscribe(r=>{let i=r.body;i&&this.form.patchValue({docType:i.docType,docNumber:i.docNumber,name:i.name,lastname:i.lastName,gender:i.gender,dob:i.birthDate,email:i.email,phone:i.phone})})}getMaxDate(){return new Date().toISOString().split("T")[0]}getMinDate(){let r=new Date;return r.setFullYear(r.getFullYear()-120),r.toISOString().split("T")[0]}onlyAllowNumbers(r){let i=["Backspace","Tab","ArrowLeft","ArrowRight","Delete","Slash","/"];console.log(r.key);let o=/^\d$/.test(r.key);i.includes(r.key)||o||r.preventDefault()}updateUserInfo(){let r=this.form.value.dob;if(/^\d{4}-\d{2}-\d{2}$/.test(r)||(r=M(new Date(r))),this.form.value.password&&this.form.value.password!==this.form.value.confirmPassword){this.form.controls.confirmPassword.setErrors({mismatch:!0}),this.form.controls.password.setErrors({mismatch:!0}),this.snackBar.open("Las contrase\xF1as no coinciden","Cerrar",{duration:5e3,panelClass:["error-snackbar","mb-5"],horizontalPosition:"right",verticalPosition:"top"});return}this.authService.updateUserInfo({name:this.form.value.name,gender:this.form.value.gender,email:this.form.value.email,phone:this.form.value.phone,lastName:this.form.value.lastname,birthDate:r,docType:this.form.value.docType,docNumber:this.form.value.docNumber,password:this.form.value.password}).subscribe({next:o=>{this.snackBar.open("Informaci\xF3n actualizada correctamente","Cerrar",{duration:5e3,panelClass:["mb-5"],horizontalPosition:"right",verticalPosition:"top"}),this.router.navigate(["/home"]).then()},error:o=>{console.error("Update info error",o),this.snackBar.open(o.error.message,"Ok",{duration:5e3,panelClass:["error-snackbar","mb-5"],horizontalPosition:"right",verticalPosition:"top"})}})}goHome(){this.router.navigate(["/home"]).then()}static \u0275fac=function(i){return new(i||u)(f(V),f(Y),f(_),f(I))};static \u0275cmp=S({type:u,selectors:[["ng-component"]],decls:68,vars:5,consts:[["picker",""],[1,"flex","items-center","justify-center","min-h-screen"],[1,"border","border-gray-400","px-8","py-3","my-3","rounded-lg","w-full","max-w-4xl"],[1,"pb-7","text-3xl","text-center","font-mono","text-slate-150"],[1,"text-lg","text-center","mb-8"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6",3,"ngSubmit","formGroup"],["appearance","fill",1,"w-full"],["formControlName","docType"],[3,"value"],["matInput","","type","text","formControlName","docNumber"],["matInput","","type","text","formControlName","name"],["matInput","","type","text","formControlName","lastname"],["formControlName","gender"],["matInput","","formControlName","dob","placeholder","MM/DD/AAAA",3,"keydown","matDatepicker","min","max"],["matIconSuffix","",3,"for"],["matInput","","type","email","formControlName","email"],["matSuffix",""],["matInput","","type","tel","formControlName","phone"],["matInput","","type","password","formControlName","password"],["matInput","","type","password","formControlName","confirmPassword"],[1,"flex","justify-center","text-center","items-center","gap-4","mt-6"],[1,"text-sm","cursor-pointer","hover:text-blue-800",3,"click"],["mat-flat-button","",1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"]],template:function(i,o){if(i&1){let m=y();t(0,"div",1)(1,"div",2)(2,"p",3),a(3,"COLSALUD"),e(),t(4,"h2",4),a(5,"Actualizar informaci\xF3n personal"),e(),t(6,"form",5),v("ngSubmit",function(){return p(m),c(o.updateUserInfo())}),t(7,"mat-form-field",6)(8,"mat-label"),a(9,"Tipo de documento"),e(),t(10,"mat-select",7),b(11,te,2,2,"mat-option",8,w),e()(),t(13,"mat-form-field",6)(14,"mat-label"),a(15,"N\xFAmero de documento"),e(),n(16,"input",9),e(),t(17,"mat-form-field",6)(18,"mat-label"),a(19,"Nombres"),e(),n(20,"input",10),e(),t(21,"mat-form-field",6)(22,"mat-label"),a(23,"Apellidos"),e(),n(24,"input",11),e(),t(25,"mat-form-field",6)(26,"mat-label"),a(27,"G\xE9nero"),e(),t(28,"mat-select",12),n(29,"mat-option"),b(30,ie,2,2,"mat-option",8,w),e()(),t(32,"mat-form-field")(33,"mat-label"),a(34,"Fecha de nacimiento"),e(),t(35,"input",13),v("keydown",function(ee){return p(m),c(o.onlyAllowNumbers(ee))}),e(),n(36,"mat-datepicker-toggle",14)(37,"mat-datepicker",null,0),e(),t(39,"mat-form-field",6)(40,"mat-label"),a(41,"Correo"),e(),n(42,"input",15),t(43,"mat-icon",16),a(44,"mail"),e()(),t(45,"mat-form-field",6)(46,"mat-label"),a(47,"Tel\xE9fono"),e(),n(48,"input",17),t(49,"mat-icon",16),a(50,"phone"),e()(),t(51,"mat-form-field",6)(52,"mat-label"),a(53,"Contrase\xF1a"),e(),n(54,"input",18),t(55,"mat-icon",16),a(56,"lock"),e()(),t(57,"mat-form-field",6)(58,"mat-label"),a(59,"Confirmar contrase\xF1a"),e(),n(60,"input",19),t(61,"mat-icon",16),a(62,"lock"),e()()(),t(63,"div",20)(64,"div",21),v("click",function(){return p(m),c(o.goHome())}),a(65,"Volver"),e(),t(66,"button",22),v("click",function(){return p(m),c(o.updateUserInfo())}),a(67," Actualizar "),e()()()()}if(i&2){let m=x(38);s(6),d("formGroup",o.form),s(5),h(o.documents),s(19),h(o.genders),s(5),d("matDatepicker",m)("min",o.getMinDate())("max",o.getMaxDate()),s(),d("for",m)}},dependencies:[L,z,T,N,U,E,k,F,A,X,$,H,W,K,J,Q,R,G,B,j,q,O,P],encapsulation:2})};export{Z as UpdateUserDataComponent};
