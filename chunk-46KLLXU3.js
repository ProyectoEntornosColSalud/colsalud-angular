import{a as P}from"./chunk-Q5MM74UU.js";import{b as M}from"./chunk-N7A26PNA.js";import{b as z,c as X,d as K,e as J,f as Q,g as W}from"./chunk-LG72T2M5.js";import{c as $}from"./chunk-CPHYMOXK.js";import{A as G,B as O,F as L,J as H,b as C,d as _,g as k,j as N,l,o as U,p as T,t as A,u as F,v as B,w as j,y as q}from"./chunk-CQBN377C.js";import"./chunk-42WQ4I5L.js";import{a as E,b as I,d as Y,e as R}from"./chunk-AINHTS73.js";import{Aa as d,Ab as D,Bb as V,Ea as f,Na as h,Ya as p,cb as w,db as b,ea as s,eb as S,fa as c,fb as t,gb as e,hb as n,lb as y,nb as v,yb as x,zb as r}from"./chunk-CKGIQUTN.js";import"./chunk-2NFLSA4Y.js";function te(u,a){if(u&1&&(t(0,"mat-option",8),r(1),e()),u&2){let i=a.$implicit;p("value",i.value),d(),D(i.viewValue)}}function ie(u,a){if(u&1&&(t(0,"mat-option",8),r(1),e()),u&2){let i=a.$implicit;p("value",i.value),d(),V("",i.viewValue," ")}}var Z=class u{constructor(a,i,o,m){this.router=a;this.fb=i;this.authService=o;this.snackBar=m;this.form=this.fb.group({docType:["",l.required],docNumber:[{value:"",disabled:!0},l.required],name:["",l.required],lastname:["",l.required],gender:["",l.required],dob:["",l.required],email:["",[l.required,l.email]],phone:["",l.required],password:["",[]],confirmPassword:["",[]]})}documents=[{value:"CC",viewValue:"C\xE9dula de ciudadan\xEDa"},{value:"TI",viewValue:"Tarjeta de identidad"},{value:"CE",viewValue:"C\xE9dula de extranjer\xEDa"}];genders=[{value:"hombre",viewValue:"Hombre"},{value:"mujer",viewValue:"Mujer"},{value:"no-binario",viewValue:"No binario"},{value:"genero-fluido",viewValue:"G\xE9nero fluido"},{value:"bigenero",viewValue:"Big\xE9nero"},{value:"trigenero",viewValue:"Trig\xE9nero"},{value:"agenero",viewValue:"Ag\xE9nero"},{value:"demiboy",viewValue:"Demiboy"},{value:"demigirl",viewValue:"Demigirl"},{value:"neutrois",viewValue:"Neutrois"},{value:"maverique",viewValue:"Maverique"},{value:"androgino",viewValue:"Andr\xF3gino"},{value:"genero-queer",viewValue:"G\xE9nero queer"},{value:"dos-espiritus",viewValue:"Dos esp\xEDritus"},{value:"hijra",viewValue:"Hijra"},{value:"faafafine",viewValue:"Fa\u2019afafine"},{value:"bakla",viewValue:"Bakla"},{value:"muxhe",viewValue:"Muxhe"},{value:"intergenero",viewValue:"Interg\xE9nero"},{value:"autogenero",viewValue:"Autog\xE9nero"},{value:"aliagenero",viewValue:"Aliag\xE9nero"},{value:"xenogenero",viewValue:"Xenog\xE9nero"}];form;ngOnInit(){this.authService.getUserInfo().subscribe(a=>{let i=a.body;i&&this.form.patchValue({docType:i.docType,docNumber:i.docNumber,name:i.name,lastname:i.lastName,gender:i.gender,dob:i.birthDate,email:i.email,phone:i.phone})})}getMaxDate(){return new Date().toISOString().split("T")[0]}getMinDate(){let a=new Date;return a.setFullYear(a.getFullYear()-120),a.toISOString().split("T")[0]}onlyAllowNumbers(a){let i=["Backspace","Tab","ArrowLeft","ArrowRight","Delete","Slash","/"];console.log(a.key);let o=/^\d$/.test(a.key);i.includes(a.key)||o||a.preventDefault()}updateUserInfo(){let a=this.form.value.dob;/^\d{4}-\d{2}-\d{2}$/.test(a)||(a=L(new Date(a))),this.authService.updateUserInfo({name:this.form.value.name,gender:this.form.value.gender,email:this.form.value.email,phone:this.form.value.phone,lastName:this.form.value.lastname,birthDate:a,docType:this.form.value.docType,docNumber:this.form.value.docNumber,password:this.form.value.password}).subscribe({error:o=>{console.error("Update info error",o),this.snackBar.open(o.error.message,"",{duration:5e3,panelClass:["error-snackbar","mb-5"],horizontalPosition:"right",verticalPosition:"top"})}})}goHome(){this.router.navigate(["/home"]).then()}static \u0275fac=function(i){return new(i||u)(f(M),f(j),f(P),f(H))};static \u0275cmp=h({type:u,selectors:[["ng-component"]],decls:68,vars:5,consts:[["picker",""],[1,"flex","items-center","justify-center","min-h-screen"],[1,"border","border-gray-400","px-8","py-3","my-3","rounded-lg","w-full","max-w-4xl"],[1,"pb-7","text-3xl","text-center","font-mono","text-slate-150"],[1,"text-lg","text-center","mb-8"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6",3,"ngSubmit","formGroup"],["appearance","fill",1,"w-full"],["formControlName","docType"],[3,"value"],["matInput","","type","text","formControlName","docNumber"],["matInput","","type","text","formControlName","name"],["matInput","","type","text","formControlName","lastname"],["formControlName","gender"],["matInput","","formControlName","dob","placeholder","MM/DD/AAAA",3,"keydown","matDatepicker","min","max"],["matIconSuffix","",3,"for"],["matInput","","type","email","formControlName","email"],["matSuffix",""],["matInput","","type","tel","formControlName","phone"],["matInput","","type","password","formControlName","password"],["matInput","","type","password","formControlName","confirmPassword"],[1,"flex","justify-center","text-center","items-center","gap-4","mt-6"],[1,"text-sm","cursor-pointer","hover:text-blue-800",3,"click"],["mat-flat-button","",1,"bg-blue-500","text-white","px-4","py-2","rounded",3,"click"]],template:function(i,o){if(i&1){let m=y();t(0,"div",1)(1,"div",2)(2,"p",3),r(3,"COLSALUD"),e(),t(4,"h2",4),r(5,"Actualizar informaci\xF3n personal"),e(),t(6,"form",5),v("ngSubmit",function(){return s(m),c(o.updateUserInfo())}),t(7,"mat-form-field",6)(8,"mat-label"),r(9,"Tipo de documento"),e(),t(10,"mat-select",7),b(11,te,2,2,"mat-option",8,w),e()(),t(13,"mat-form-field",6)(14,"mat-label"),r(15,"N\xFAmero de documento"),e(),n(16,"input",9),e(),t(17,"mat-form-field",6)(18,"mat-label"),r(19,"Nombres"),e(),n(20,"input",10),e(),t(21,"mat-form-field",6)(22,"mat-label"),r(23,"Apellidos"),e(),n(24,"input",11),e(),t(25,"mat-form-field",6)(26,"mat-label"),r(27,"G\xE9nero"),e(),t(28,"mat-select",12),n(29,"mat-option"),b(30,ie,2,2,"mat-option",8,w),e()(),t(32,"mat-form-field")(33,"mat-label"),r(34,"Fecha de nacimiento"),e(),t(35,"input",13),v("keydown",function(ee){return s(m),c(o.onlyAllowNumbers(ee))}),e(),n(36,"mat-datepicker-toggle",14)(37,"mat-datepicker",null,0),e(),t(39,"mat-form-field",6)(40,"mat-label"),r(41,"Correo"),e(),n(42,"input",15),t(43,"mat-icon",16),r(44,"mail"),e()(),t(45,"mat-form-field",6)(46,"mat-label"),r(47,"Tel\xE9fono"),e(),n(48,"input",17),t(49,"mat-icon",16),r(50,"phone"),e()(),t(51,"mat-form-field",6)(52,"mat-label"),r(53,"Contrase\xF1a"),e(),n(54,"input",18),t(55,"mat-icon",16),r(56,"lock"),e()(),t(57,"mat-form-field",6)(58,"mat-label"),r(59,"Confirmar contrase\xF1a"),e(),n(60,"input",19),t(61,"mat-icon",16),r(62,"lock"),e()()(),t(63,"div",20)(64,"div",21),v("click",function(){return s(m),c(o.goHome())}),r(65,"Volver"),e(),t(66,"button",22),v("click",function(){return s(m),c(o.updateUserInfo())}),r(67," Actualizar "),e()()()()}if(i&2){let m=x(38);d(6),p("formGroup",o.form),d(5),S(o.documents),d(19),S(o.genders),d(5),p("matDatepicker",m)("min",o.getMinDate())("max",o.getMaxDate()),d(),p("for",m)}},dependencies:[O,G,k,C,_,R,Y,I,E,X,z,$,W,K,J,Q,q,A,N,U,T,F,B],encapsulation:2})};export{Z as UpdateUserDataComponent};
